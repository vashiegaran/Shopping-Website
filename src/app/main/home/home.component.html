
<div  fxLayout="row wrap" >
  <app-header fxFlex="100%" pageTitle="Home"></app-header>
  <mat-divider></mat-divider>

  <div class="search-hero" fxLayoutAlign="center center" style="height:100px; background-color: #00ffff;"fxLayout="row wrap" fxFlex="100%">
    <mat-form-field style="width: 80%" floatLabel='never'>
      <input  
             matInput 
             [(ngModel)]="searchText" 
             placeholder="Search" 
             autocomplete="off" >
    </mat-form-field>
  </div>

  <div style="height:700px;width: 20px;" fxFlex="20%" fxLayout="row wrap" fxLayoutAlign = "center">
    <section class="example-section" [formGroup]="toppings">
      <h4>Category:</h4>
      <p><mat-checkbox formControlName="Fashion">Fashion</mat-checkbox></p>
      <p><mat-checkbox formControlName="Electronics">Electronics</mat-checkbox></p>
      <p><mat-checkbox formControlName="Food">Food</mat-checkbox></p>
    </section>
  </div>
  

  <div  fxLayoutAlign="flex-start" fxLayoutGap="12px" fxLayout="row wrap" *ngIf="toggle ; else showProductDetails"  fxFlex="60%" >

           <button class="border" style = "cursor: pointer; height:300px"fxLayoutAlign="flex-center" fxLayout="column " fxFlex="20%" *ngFor="let data of members | search:searchText"(click)="showDetails(data);toggle=!toggle;getReviewDetails(data)" >
              
              <div fxLayoutAlign="center center" fxFlex=50%>
                <img style="width:130px;height:130px;" [src]=data.imageUrl>
             </div>
             <div fxLayoutAlign="center center" fxLayout="column"fxLayoutGap ="1px" fxFlex=50%>
                <div class="p4">{{data.name}}</div>
                <div class="p3">RM:{{data.price}}</div>
                <ngb-rating class="star"  [max]="5" [(rate)]="rating" [readonly]="true"></ngb-rating>

              <!-- <ngb-rating [(rate)]="currentRate"></ngb-rating>--> 

            </div>
          </button>
      </div>
    <div *ngIf="cartOpen" fxLayoutAlign="end center" >
      <app-cart #cart></app-cart>
    </div>

</div>


      <ng-template #showProductDetails>

        <div fxFlex="40%" fxLayout="column wrap" fxLayoutAlign="flex-start">
          <img style="width:700px;height:550px; margin-top: 10px;" [src]=myDocData.imageUrl>
          <div style="margin-left:10px ;">
            <h3 class="size">{{myDocData.category}}</h3>
            <h2 class ="font1">{{myDocData.name}}</h2>
            <mat-icon> location_on </mat-icon><span class="aligned-with-icon">Delivery to entire Malaysia</span>
            <br>
            <br>
            <mat-icon> local_shipping</mat-icon><span class="aligned-with-icon">Estimated Delivery Date</span>
            <p class="date">{{date | date: 'dd-MMM'}} - {{date2 | date: 'dd-MMM-yyyy'}}</p>
            <mat-icon> local_shipping</mat-icon><span class="aligned-with-icon">Shipping Fee</span>
            <p class="date">RM:{{myDocData.shipPrice}}.00</p>   
            <mat-divider horizontal></mat-divider>
            <br>
            <h2 class="title">Product Description</h2> 
            <p class="des">{{myDocData.descr}}</p>  
            <div style="height:400px;"></div>
            <div class="borderLine"></div>
            <h2 class="title" >Delivery Coverage</h2>
            <p class="des">This product can only deliver to certain area within Malaysia</p>
            <div  class="borderLine"></div>
            <h2 class="title" >Delivery Term</h2>
            <p class="des">I will send out your product once order is confirmed.</p>
            <p class="des"> The product is expected to reach you in 4-7 working days.</p> 
            <div  class="borderLine"></div>
            <h2 class="tittle">Ratings & Reviews </h2>

            <ngb-rating class="star2"  [max]="5" [(rate)]="rating" [readonly]="true"></ngb-rating>
            <div  class="borderLine"></div>
            <p class="des">{{review.review}}</p> 

          </div>

        </div>

      <mat-card style="margin-top: 10px; width: 30%; height: 400px;"  fxFlex="20%">
        <div fxFlex="100%" FxLayoutAlign="column wrap">
        <div fxFLex="50%" class="write">RM:{{myDocData.price}}.00</div>

        <div style="margin-top:40px;" fxLayoutAlign="row">
          <div  fxFlex="40%" class="write">Quantity</div>
            <div fxFlex="60%"></div>
            <div  fxLayoutAlign="space-around center"   class="button-container">
              <button (click)="countProd('remove')" mat-mini-fab color="accent" >
                <mat-icon>remove</mat-icon>
              </button>
              {{counter}}
              <button (click)="countProd('add')" mat-mini-fab color="accent" >
                <mat-icon>add</mat-icon>
              </button>
            </div>
            
        </div>
        <div style="margin-top:40px;" fxLayout="row">
          <div fxLayout="column" fxFlex="60%" class="write">Service Charge</div>
            <div  fxFlex="10%"></div>
             <div  fxFlex="30%" class="write" style="margin-top:10px;" >RM:00.00</div> 
        </div>
        <div style="margin-top:20px;"  >
          <div  fxFlex="60%" class="write">Total</div>
          <div fxFlex="10%"></div>
          <h3 fxFLex="30%" style="margin-top:10px;" >RM:{{myDocData.price*counter}}.00</h3> 

        </div>
<!--addToCart(myDocData, counter);-->
        <div fxLayoutAlign="center center" >
          <button ng-sidebar-content style="margin-top:50px; width: 200px;" [disabled]="counter < 1" mat-flat-button color="primary"(click)="addToCart(myDocData, counter); toggleSidebar(); cart.getCartDetails(); ">Add to Cart</button>
          <mat-error *ngIf="savedChanges">
            <br/>
            <br/> Shopping cart is updated.
            <mat-icon (click)="savedChanges=!savedChanges" color="lime">close</mat-icon>
            <span class="med-spacer"></span>
            <br/>
        </mat-error>
        </div>
        

      </div>           
      </mat-card >


    
    </ng-template>

 
  





